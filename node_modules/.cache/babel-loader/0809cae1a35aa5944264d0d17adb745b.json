{"ast":null,"code":"import _regeneratorRuntime from\"/Users/suho/TeamProject/Spring/projectFinal/tripass/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _createForOfIteratorHelper from\"/Users/suho/TeamProject/Spring/projectFinal/tripass/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _objectSpread from\"/Users/suho/TeamProject/Spring/projectFinal/tripass/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/suho/TeamProject/Spring/projectFinal/tripass/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{useState,useEffect}from\"react\";import axios from\"axios\";var listeners=[];var state={data:null,error:null,sidebar:false,modal:false,video:false,request:{modal:false,text:\"\"}};var actions={fetch:function(){var _fetch=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,_iterator,_step,listener;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(// Change with your database path\n\"/api/data\");case 3:response=_context.sent;state=_objectSpread(_objectSpread({},state),{},{data:response.data});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);state=_objectSpread(_objectSpread({},state),{},{error:_context.t0});case 10:_iterator=_createForOfIteratorHelper(listeners);try{for(_iterator.s();!(_step=_iterator.n()).done;){listener=_step.value;listener(state);}}catch(err){_iterator.e(err);}finally{_iterator.f();}case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));function fetch(){return _fetch.apply(this,arguments);}return fetch;}(),toogleSidebar:function toogleSidebar(){state=_objectSpread(_objectSpread({},state),{},{sidebar:!state.sidebar});var _iterator2=_createForOfIteratorHelper(listeners),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var listener=_step2.value;listener(state);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}},toogleModal:function toogleModal(){state=_objectSpread(_objectSpread({},state),{},{modal:!state.modal});var _iterator3=_createForOfIteratorHelper(listeners),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var listener=_step3.value;listener(state);}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}},toogleRequest:function toogleRequest(payload){state=_objectSpread(_objectSpread({},state),{},{request:{modal:!state.request.modal,text:payload}});var _iterator4=_createForOfIteratorHelper(listeners),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var listener=_step4.value;listener(state);}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}},toogleVideo:function toogleVideo(){state=_objectSpread(_objectSpread({},state),{},{video:!state.video});var _iterator5=_createForOfIteratorHelper(listeners),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var listener=_step5.value;listener(state);}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}}};export var useCustomState=function useCustomState(){var setState=useState(state)[1];useEffect(function(){listeners.push(setState);return function(){listeners=listeners.filter(function(li){return li!==setState;});};},[setState]);return[state,actions];};","map":{"version":3,"sources":["/Users/suho/TeamProject/Spring/projectFinal/tripass/react/src/state/state.js"],"names":["useState","useEffect","axios","listeners","state","data","error","sidebar","modal","video","request","text","actions","fetch","get","response","listener","toogleSidebar","toogleModal","toogleRequest","payload","toogleVideo","useCustomState","setState","push","filter","li"],"mappings":"otBAAA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA,GAAIC,CAAAA,SAAS,CAAG,EAAhB,CAEA,GAAIC,CAAAA,KAAK,CAAG,CACVC,IAAI,CAAE,IADI,CAEVC,KAAK,CAAE,IAFG,CAGVC,OAAO,CAAE,KAHC,CAIVC,KAAK,CAAE,KAJG,CAKVC,KAAK,CAAE,KALG,CAMVC,OAAO,CAAE,CACPF,KAAK,CAAE,KADA,CAEPG,IAAI,CAAE,EAFC,CANC,CAAZ,CAYA,GAAMC,CAAAA,OAAO,CAAG,CACdC,KAAK,+EAAE,+MAEoBX,CAAAA,KAAK,CAACY,GAAN,CACrB;AACA,WAFqB,CAFpB,QAEGC,QAFH,eAMHX,KAAK,gCAAQA,KAAR,MAAeC,IAAI,CAAEU,QAAQ,CAACV,IAA9B,EAAL,CANG,+EAQHD,KAAK,gCAAQA,KAAR,MAAeE,KAAK,YAApB,EAAL,CARG,6CAWkBH,SAXlB,MAWL,+CAAkC,CAAvBa,QAAuB,aAChCA,QAAQ,CAACZ,KAAD,CAAR,CACD,CAbI,yHAAF,yEADS,CAgBda,aAAa,CAAE,wBAAM,CACnBb,KAAK,gCAAQA,KAAR,MAAeG,OAAO,CAAE,CAACH,KAAK,CAACG,OAA/B,EAAL,CADmB,0CAGIJ,SAHJ,aAGnB,kDAAkC,IAAvBa,CAAAA,QAAuB,cAChCA,QAAQ,CAACZ,KAAD,CAAR,CACD,CALkB,uDAMpB,CAtBa,CAuBdc,WAAW,CAAE,sBAAM,CACjBd,KAAK,gCAAQA,KAAR,MAAeI,KAAK,CAAE,CAACJ,KAAK,CAACI,KAA7B,EAAL,CADiB,0CAGML,SAHN,aAGjB,kDAAkC,IAAvBa,CAAAA,QAAuB,cAChCA,QAAQ,CAACZ,KAAD,CAAR,CACD,CALgB,uDAMlB,CA7Ba,CA8Bde,aAAa,CAAE,uBAACC,OAAD,CAAa,CAC1BhB,KAAK,gCACAA,KADA,MAEHM,OAAO,CAAE,CAAEF,KAAK,CAAE,CAACJ,KAAK,CAACM,OAAN,CAAcF,KAAxB,CAA+BG,IAAI,CAAES,OAArC,CAFN,EAAL,CAD0B,0CAMHjB,SANG,aAM1B,kDAAkC,IAAvBa,CAAAA,QAAuB,cAChCA,QAAQ,CAACZ,KAAD,CAAR,CACD,CARyB,uDAS3B,CAvCa,CAwCdiB,WAAW,CAAE,sBAAM,CACjBjB,KAAK,gCAAQA,KAAR,MAAeK,KAAK,CAAE,CAACL,KAAK,CAACK,KAA7B,EAAL,CADiB,0CAGMN,SAHN,aAGjB,kDAAkC,IAAvBa,CAAAA,QAAuB,cAChCA,QAAQ,CAACZ,KAAD,CAAR,CACD,CALgB,uDAMlB,CA9Ca,CAAhB,CAiDA,MAAO,IAAMkB,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CAClC,GAAMC,CAAAA,QAAQ,CAAGvB,QAAQ,CAACI,KAAD,CAAR,CAAgB,CAAhB,CAAjB,CAEAH,SAAS,CAAC,UAAM,CACdE,SAAS,CAACqB,IAAV,CAAeD,QAAf,EAEA,MAAO,WAAM,CACXpB,SAAS,CAAGA,SAAS,CAACsB,MAAV,CAAiB,SAACC,EAAD,QAAQA,CAAAA,EAAE,GAAKH,QAAf,EAAjB,CAAZ,CACD,CAFD,CAGD,CANQ,CAMN,CAACA,QAAD,CANM,CAAT,CAQA,MAAO,CAACnB,KAAD,CAAQQ,OAAR,CAAP,CACD,CAZM","sourcesContent":["import { useState, useEffect } from \"react\";\nimport axios from \"axios\";\n\nlet listeners = [];\n\nlet state = {\n  data: null,\n  error: null,\n  sidebar: false,\n  modal: false,\n  video: false,\n  request: {\n    modal: false,\n    text: \"\",\n  },\n};\n\nconst actions = {\n  fetch: async () => {\n    try {\n      const response = await axios.get(\n        // Change with your database path\n        \"/api/data\"\n      );\n      state = { ...state, data: response.data };\n    } catch (err) {\n      state = { ...state, error: err };\n    }\n\n    for (const listener of listeners) {\n      listener(state);\n    }\n  },\n  toogleSidebar: () => {\n    state = { ...state, sidebar: !state.sidebar };\n\n    for (const listener of listeners) {\n      listener(state);\n    }\n  },\n  toogleModal: () => {\n    state = { ...state, modal: !state.modal };\n\n    for (const listener of listeners) {\n      listener(state);\n    }\n  },\n  toogleRequest: (payload) => {\n    state = {\n      ...state,\n      request: { modal: !state.request.modal, text: payload },\n    };\n\n    for (const listener of listeners) {\n      listener(state);\n    }\n  },\n  toogleVideo: () => {\n    state = { ...state, video: !state.video };\n\n    for (const listener of listeners) {\n      listener(state);\n    }\n  },\n};\n\nexport const useCustomState = () => {\n  const setState = useState(state)[1];\n\n  useEffect(() => {\n    listeners.push(setState);\n\n    return () => {\n      listeners = listeners.filter((li) => li !== setState);\n    };\n  }, [setState]);\n\n  return [state, actions];\n};\n"]},"metadata":{},"sourceType":"module"}