{"ast":null,"code":"import _slicedToArray from\"/Users/suho/TeamProject/Spring/projectFinal/tripass/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import axios from'axios';import styles from'../styles/UserList.module.scss';import DeleteIcon from'@material-ui/icons/Delete';import Pagination from'webapp/cmm/elements/Pagination/Pagination';import Card from'webapp/cmm/layouts/Card/Card';import{Table,TableBody,TableCell,TableFooter,TableHead,TableRow}from'@material-ui/core';export default(function(){var usr=['번호','권한','가입 플랫폼','소셜 ID','고객성함','이메일주소','연령대','성별','가입날짜','회원탈퇴'];var _useState=useState([]),_useState2=_slicedToArray(_useState,2),userList=_useState2[0],setUserList=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),userCount=_useState4[0],setUserCount=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),currentPage=_useState6[0],setCurrentPage=_useState6[1];var pageSize=10;var blockSize=10;var countURL=process.env.REACT_APP_API_URL+'/user/count';var deleteURL=process.env.REACT_APP_API_URL+'/user/delete';useEffect(function(){axios.get(countURL).then(function(respone){setUserCount(respone.data);});axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/user/list?page=\").concat(currentPage-1,\"&size=\").concat(pageSize)).then(function(response){setUserList(response.data.content);}).catch(function(err){alert(err);});},[currentPage]);var deleteUser=function deleteUser(user){var deleteConfirm=window.confirm('정말 유저정보를 삭제하시겠습니까?');if(deleteConfirm===true){axios.delete(deleteURL,{data:{num:user.num}}).then(function(response){console.log(response.data);alert(\"\".concat(user.username,\"\\uACE0\\uAC1D\\uB2D8 \\uC815\\uBCF4\\uB97C \\uC0AD\\uC81C\\uD558\\uC168\\uC2B5\\uB2C8\\uB2E4.\"));window.location.reload();}).catch(function(err){alert(err);});}else{alert('유저정보 삭제를 취소하셨습니다.');window.location.reload();}};var title=/*#__PURE__*/React.createElement(\"center\",null,/*#__PURE__*/React.createElement(\"h2\",null,\" \\uACE0\\uAC1D \\uC815\\uBCF4 \\uB370\\uC774\\uD130\"),/*#__PURE__*/React.createElement(\"h3\",null,\"\\u203B \\uAD6C\\uAE00\\uC740 \\uC131\\uBCC4\\uACFC \\uC5F0\\uB839\\uB300\\uB97C \\uC800\\uC7A5\\uD560 \\uC218 \\uC5C6\\uC2B5\\uB2C8\\uB2E4. (\\uAD6C\\uAE00 \\uC815\\uCC45\\uC0AC\\uD56D)\"),\" \");var content=/*#__PURE__*/React.createElement(Table,null,/*#__PURE__*/React.createElement(TableHead,null,/*#__PURE__*/React.createElement(TableRow,null,usr.map(function(user){return/*#__PURE__*/React.createElement(TableCell,null,user);}))),/*#__PURE__*/React.createElement(TableBody,{className:styles.body},userList.map(function(user,key){return/*#__PURE__*/React.createElement(TableRow,{key:key},/*#__PURE__*/React.createElement(TableCell,null,user.num),/*#__PURE__*/React.createElement(TableCell,null,user.role),/*#__PURE__*/React.createElement(TableCell,null,user.provider),/*#__PURE__*/React.createElement(TableCell,null,user.providerId),/*#__PURE__*/React.createElement(TableCell,null,user.username),/*#__PURE__*/React.createElement(TableCell,null,user.email),/*#__PURE__*/React.createElement(TableCell,null,user.age),/*#__PURE__*/React.createElement(TableCell,null,user.gender),/*#__PURE__*/React.createElement(TableCell,null,user.createDate),/*#__PURE__*/React.createElement(TableCell,{onClick:function onClick(){return deleteUser(user);}},/*#__PURE__*/React.createElement(\"div\",{className:styles.svg},/*#__PURE__*/React.createElement(DeleteIcon,null))));})),/*#__PURE__*/React.createElement(TableFooter,null,/*#__PURE__*/React.createElement(TableRow,null,/*#__PURE__*/React.createElement(\"td\",{colSpan:\"10\"},/*#__PURE__*/React.createElement(\"div\",{style:{margin:0}},/*#__PURE__*/React.createElement(Pagination,{pageCount:Math.ceil(userCount/pageSize),pageNum:currentPage,setPage:setCurrentPage,blockSize:blockSize}))))));return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Card,{header:title,body:content}));});","map":{"version":3,"sources":["/Users/suho/TeamProject/Spring/projectFinal/tripass/react/src/webapp/usr/pages/UserList.jsx"],"names":["React","useEffect","useState","axios","styles","DeleteIcon","Pagination","Card","Table","TableBody","TableCell","TableFooter","TableHead","TableRow","usr","userList","setUserList","userCount","setUserCount","currentPage","setCurrentPage","pageSize","blockSize","countURL","process","env","REACT_APP_API_URL","deleteURL","get","then","respone","data","response","content","catch","err","alert","deleteUser","user","deleteConfirm","window","confirm","delete","num","console","log","username","location","reload","title","map","body","key","role","provider","providerId","email","age","gender","createDate","svg","margin","Math","ceil"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport axios from 'axios'\nimport styles from '../styles/UserList.module.scss'\nimport DeleteIcon from '@material-ui/icons/Delete'\nimport Pagination from 'webapp/cmm/elements/Pagination/Pagination'\nimport Card from 'webapp/cmm/layouts/Card/Card'\nimport { Table, TableBody, TableCell, TableFooter, TableHead, TableRow } from '@material-ui/core'\n\nexport default () => {\n  const usr = ['번호', '권한', '가입 플랫폼', '소셜 ID', '고객성함', '이메일주소', '연령대', '성별', '가입날짜', '회원탈퇴']\n  const [userList, setUserList] = useState([])\n  const [userCount, setUserCount] = useState(0)\n  const [currentPage, setCurrentPage] = useState(1)\n  const pageSize = 10\n  const blockSize = 10\n  const countURL = process.env.REACT_APP_API_URL+'/user/count'\n  const deleteURL = process.env.REACT_APP_API_URL+'/user/delete'\n\n  useEffect(() => {\n    axios.get(countURL)\n      .then(respone => { setUserCount(respone.data) })\n    axios.get(`${process.env.REACT_APP_API_URL}/user/list?page=${currentPage - 1}&size=${pageSize}`)\n      .then((response) => { setUserList(response.data.content) })\n      .catch(err => { alert(err) })\n  }, [currentPage])\n\n  const deleteUser = ((user) => {\n    const deleteConfirm = window.confirm('정말 유저정보를 삭제하시겠습니까?')\n    if (deleteConfirm === true) {\n      axios.delete(deleteURL, {\n        data: { num: user.num }\n      })\n        .then((response) => {\n          console.log(response.data)\n          alert(`${user.username}고객님 정보를 삭제하셨습니다.`)\n          window.location.reload()\n        })\n        .catch(err => { alert(err) })\n    } else {\n      alert('유저정보 삭제를 취소하셨습니다.')\n      window.location.reload()\n    }\n  })\n  const title = <center><h2> 고객 정보 데이터</h2><h3>※ 구글은 성별과 연령대를 저장할 수 없습니다. (구글 정책사항)</h3> </center>\n  const content =\n    <Table>\n      <TableHead >\n        <TableRow>\n          {usr.map((user) => {\n            return <TableCell>{user}</TableCell>\n          })}\n        </TableRow>\n      </TableHead>\n      <TableBody className={styles.body}>\n        {userList.map((user, key) => {\n          return (\n            <TableRow key={key}>\n              <TableCell>{user.num}</TableCell>\n              <TableCell>{user.role}</TableCell>\n              <TableCell>{user.provider}</TableCell>\n              <TableCell>{user.providerId}</TableCell>\n              <TableCell>{user.username}</TableCell>\n              <TableCell>{user.email}</TableCell>\n              <TableCell>{user.age}</TableCell>\n              <TableCell>{user.gender}</TableCell>\n              <TableCell>{user.createDate}</TableCell>\n              <TableCell onClick={() => deleteUser(user)}>\n                <div className={styles.svg}><DeleteIcon /></div>\n              </TableCell>\n            </TableRow>\n          )\n        })}\n      </TableBody>\n\n      <TableFooter>\n        <TableRow>\n          <td  colSpan='10'>\n            <div style={{margin:0}}>\n          <Pagination\n            pageCount={Math.ceil(userCount / pageSize)}\n            pageNum={currentPage}\n            setPage={setCurrentPage}\n            blockSize={blockSize}/>\n            </div>\n          </td>\n        </TableRow>\n      </TableFooter>\n    </Table>\n\n  return <>\n    <Card header={title} body={content} />\n  </>\n\n\n}"]},"metadata":{},"sourceType":"module"}