{"ast":null,"code":"import _slicedToArray from\"/Users/suho/TeamProject/Spring/projectFinal/tripass/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import styles from\"../styles/PlaceList.module.scss\";import{useCustomState}from\"webapp/cmm/state/State\";import{useParams}from\"react-router-dom\";import{animateScroll as scroll}from\"react-scroll\";import{BlogPagination,BlogSearch}from\"components/pages/Blog/components\";import BlogCard from\"webapp/pce/components/BlogCard/BlogCard\";import axios from\"axios\";import BlogCategories from\"webapp/pce/components/BlogCategories/BlogCategories\";import Button from'components/elements/Button/Button';export default(function(_ref){var _ref$sidebar=_ref.sidebar,sidebar=_ref$sidebar===void 0?\"left\":_ref$sidebar,_ref$layout=_ref.layout,layout=_ref$layout===void 0?\"grid\":_ref$layout,_ref$title=_ref.title,title=_ref$title===void 0?\"title\":_ref$title;var state=useCustomState()[0];var _useParams=useParams(),category=_useParams.category;var _useState=useState(1),_useState2=_slicedToArray(_useState,2),currentPage=_useState2[0],setCurrentPage=_useState2[1];var postsPerPage=useState(6)[0];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),placeArray=_useState4[0],setPlaceArray=_useState4[1];var URL=process.env.REACT_APP_API_URL;useEffect(function(){if(category){axios.get(\"\".concat(URL,\"/place/cat/\").concat(category)).then(function(data){setPlaceArray(data.data.map(function(post,index){return/*#__PURE__*/React.createElement(BlogCard,{key:index,layout:layout,post:post});}));}).catch(function(err){alert(err);});}else{axios.get(\"\".concat(URL,\"/place/list\")).then(function(resp){setPlaceArray(resp.data.map(function(post,index){return/*#__PURE__*/React.createElement(BlogCard,{key:index,layout:layout,post:post});}));}).catch(function(err){});}setCurrentPage(1);},[]);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"section\",{className:[styles.wrapper,sidebar===\"left\"?styles.with_sidebar+\" \"+styles.left:sidebar===\"right\"?styles.with_sidebar+\" \"+styles.right:null].join(\" \")},/*#__PURE__*/React.createElement(\"aside\",{className:styles.sidebar},/*#__PURE__*/React.createElement(BlogSearch,null),/*#__PURE__*/React.createElement(BlogCategories,{data:state.data.categories}),/*#__PURE__*/React.createElement(Button,{to:\"\".concat(URL,\"/place/add\")},\"관광지 추가\")),/*#__PURE__*/React.createElement(\"article\",null,/*#__PURE__*/React.createElement(\"div\",{className:layout===\"grid\"?styles.grid:layout===\"list\"?styles.list:null},placeArray.slice((currentPage-1)*postsPerPage,currentPage*postsPerPage)),/*#__PURE__*/React.createElement(BlogPagination,{amount:Math.ceil(placeArray.length/postsPerPage),current:currentPage,next:function next(){setCurrentPage(function(c){return c+1;});scroll.scrollToTop();},prev:function prev(){setCurrentPage(function(c){return c-1;});scroll.scrollToTop();},goto:function goto(id){setCurrentPage(id);scroll.scrollToTop();}}))));});","map":{"version":3,"sources":["/Users/suho/TeamProject/Spring/projectFinal/tripass/react/src/webapp/pce/pages/PlaceList.jsx"],"names":["React","useState","useEffect","styles","useCustomState","useParams","animateScroll","scroll","BlogPagination","BlogSearch","BlogCard","axios","BlogCategories","Button","sidebar","layout","title","state","category","currentPage","setCurrentPage","postsPerPage","placeArray","setPlaceArray","URL","process","env","REACT_APP_API_URL","get","then","data","map","post","index","catch","err","alert","resp","wrapper","with_sidebar","left","right","join","categories","grid","list","slice","Math","ceil","length","c","scrollToTop","id"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport styles from \"../styles/PlaceList.module.scss\";\nimport { useCustomState } from \"webapp/cmm/state/State\";\nimport { useParams } from \"react-router-dom\";\nimport { animateScroll as scroll } from \"react-scroll\";\n\n\nimport {\n  BlogPagination,\n  BlogSearch\n} from \"components/pages/Blog/components\";\n\nimport BlogCard from \"webapp/pce/components/BlogCard/BlogCard\";\nimport axios from \"axios\";\nimport BlogCategories from \"webapp/pce/components/BlogCategories/BlogCategories\";\nimport Button from 'components/elements/Button/Button'\n\nexport default ({ sidebar = \"left\", layout = \"grid\", title = \"title\" }) => {\n  const state = useCustomState()[0];\n  const { category } = useParams();\n  const [currentPage, setCurrentPage] = useState(1);\n  const postsPerPage = useState(6)[0];\n  const [placeArray, setPlaceArray] = useState([]);\n  const URL = process.env.REACT_APP_API_URL\n\n  useEffect(() => {\n    if (category) {\n      axios.get(`${URL}/place/cat/${category}`)\n        .then((data) => {\n          setPlaceArray(\n            data.data.map((post, index) => {\n              return (\n                <BlogCard\n                  key={index}\n                  layout={layout}\n                  post={post} />\n              );\n            })\n          );\n        }).catch((err) => {\n          alert(err)\n        })\n    } else {\n      axios.get(`${URL}/place/list`)\n        .then(resp => {\n          setPlaceArray(\n            resp.data.map((post, index) => {\n              return (\n                <BlogCard\n                  key={index}\n                  layout={layout}\n                  post={post} />\n              );\n            })\n          );\n        })\n        .catch((err) => {\n        })\n    }\n    setCurrentPage(1);\n  }, []);\n\n  return (\n    <>\n      <section\n        className={[\n          styles.wrapper,\n          sidebar === \"left\"\n            ? styles.with_sidebar + \" \" + styles.left\n            : sidebar === \"right\"\n              ? styles.with_sidebar + \" \" + styles.right\n              : null,\n        ].join(\" \")}\n      >\n        <aside className={styles.sidebar}>\n          <BlogSearch />\n          <BlogCategories data={state.data.categories} />\n          <Button to={`${URL}/place/add`}>{\"관광지 추가\"}</Button>\n        </aside>\n\n        <article>\n          <div\n            className={\n              layout === \"grid\"\n                ? styles.grid\n                : layout === \"list\"\n                  ? styles.list\n                  : null\n            }\n          >\n            {placeArray.slice(\n              (currentPage - 1) * postsPerPage,\n              currentPage * postsPerPage\n            )}\n          </div>\n\n          <BlogPagination\n            amount={Math.ceil(placeArray.length / postsPerPage)}\n            current={currentPage}\n            next={() => {\n              setCurrentPage((c) => c + 1);\n              scroll.scrollToTop();\n            }}\n            prev={() => {\n              setCurrentPage((c) => c - 1);\n              scroll.scrollToTop();\n            }}\n            goto={(id) => {\n              setCurrentPage(id);\n              scroll.scrollToTop();\n            }}\n          />\n        </article>\n      </section>\n    </>\n  );\n};"]},"metadata":{},"sourceType":"module"}