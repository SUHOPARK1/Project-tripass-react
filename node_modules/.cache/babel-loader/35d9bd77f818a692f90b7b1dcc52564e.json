{"ast":null,"code":"import _slicedToArray from\"/Users/suho/TeamProject/Spring/projectFinal/tripass/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import Styles from'../styles/ReviewList.module.scss';import StarIcon from'@material-ui/icons/Star';import axios from'axios';import{useSelector}from\"react-redux\";export default(function(_ref){var contentid=_ref.contentid;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),reviewList=_useState2[0],setReviewList=_useState2[1];var listURL=process.env.REACT_APP_API_URL+'/review/list/';var deleteURL=process.env.REACT_APP_API_URL+'/review/delete/';var currentNum=useSelector(function(state){return state.accountReducer.currentNum;});var starAvg=function starAvg(reviewList){if(reviewList.length===0)return false;var starSum=0;reviewList.map(function(reviewer){starSum+=Number(reviewer.revStar);});return(starSum/reviewList.length).toFixed(2);};useEffect(function(){axios.get(listURL+\"\".concat(contentid)).then(function(response){setReviewList(response.data);}).catch(function(err){});},[]);var deleteReview=function deleteReview(reviewer){var deleteConfirm=window.confirm('정말 리뷰를 삭제하시겠습니까?');if(deleteConfirm===true){axios.delete(deleteURL,{data:reviewer}).then(function(response){console.log(response.data);alert(\"\\uC131\\uACF5\\uC801\\uC73C\\uB85C \\uC0AD\\uC81C\\uD558\\uC168\\uC2B5\\uB2C8\\uB2E4.\");window.location.reload(deleteURL);}).catch(function(err){alert(err);});}else{alert('취소하셨습니다.');window.location.reload(deleteURL);}};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:Styles.kContent},/*#__PURE__*/React.createElement(\"div\",{className:Styles.comment},/*#__PURE__*/React.createElement(\"div\",{className:Styles.ahead_info},/*#__PURE__*/React.createElement(\"strong\",{className:Styles.screen_out},\"\\uD3C9\\uAC00 \\uC694\\uC57D\"),/*#__PURE__*/React.createElement(\"div\",{className:Styles.grade_star},/*#__PURE__*/React.createElement(\"em\",{className:Styles.avg_rate},\"\\uD3C9\\uC810\",/*#__PURE__*/React.createElement(StarIcon,{style:{color:'#3396ff',fontSize:'35px'}}),starAvg(reviewList)||' 리뷰가 없습니다.',/*#__PURE__*/React.createElement(\"span\",{className:Styles.txt_score})))),/*#__PURE__*/React.createElement(\"div\",{className:Styles.evaluation_review},/*#__PURE__*/React.createElement(\"strong\",{className:Styles.screen_out})),/*#__PURE__*/React.createElement(\"ul\",{className:Styles.reivew_form},reviewList.map(function(reviewer){return/*#__PURE__*/React.createElement(\"li\",{className:Styles.liStyle},/*#__PURE__*/React.createElement(\"div\",{className:Styles.star_info},/*#__PURE__*/React.createElement(\"em\",{className:Styles.num_rate},/*#__PURE__*/React.createElement(StarIcon,{style:{color:'#3396ff',fontSize:\"15px\"}}),\"\\xA0\",reviewer.revStar,\"/5\",/*#__PURE__*/React.createElement(\"span\",{className:Styles.screen_out},\"\\uC810\"))),/*#__PURE__*/React.createElement(\"div\",{className:Styles.comment_info},/*#__PURE__*/React.createElement(\"p\",{className:Styles.txt_comment},/*#__PURE__*/React.createElement(\"span\",null,reviewer.revContent)),/*#__PURE__*/React.createElement(\"div\",{className:Styles.append_item},/*#__PURE__*/React.createElement(\"a\",{className:Styles.bg_bar}),/*#__PURE__*/React.createElement(\"span\",{className:Styles.link_user},reviewer.revName),/*#__PURE__*/React.createElement(\"a\",{className:Styles.bg_bar}),/*#__PURE__*/React.createElement(\"span\",{className:Styles.time_write},reviewer.revDate),reviewer.num==currentNum?/*#__PURE__*/React.createElement(\"span\",{className:Styles.delete,onClick:function onClick(){return deleteReview(reviewer);}},/*#__PURE__*/React.createElement(\"a\",{className:Styles.bg_bar}),\"\\uC0AD\\uC81C \"):/*#__PURE__*/React.createElement(\"span\",null),/*#__PURE__*/React.createElement(\"a\",{className:Styles.bg_bar}),/*#__PURE__*/React.createElement(\"a\",{className:Styles.link_function}))));})))),/*#__PURE__*/React.createElement(\"div\",{style:{fontSize:'120px'}},/*#__PURE__*/React.createElement(\"br\",null)));});","map":{"version":3,"sources":["/Users/suho/TeamProject/Spring/projectFinal/tripass/react/src/webapp/rev/pages/ReviewList.jsx"],"names":["React","useEffect","useState","Styles","StarIcon","axios","useSelector","contentid","reviewList","setReviewList","listURL","process","env","REACT_APP_API_URL","deleteURL","currentNum","state","accountReducer","starAvg","length","starSum","map","reviewer","Number","revStar","toFixed","get","then","response","data","catch","err","deleteReview","deleteConfirm","window","confirm","delete","console","log","alert","location","reload","kContent","comment","ahead_info","screen_out","grade_star","avg_rate","color","fontSize","txt_score","evaluation_review","reivew_form","liStyle","star_info","num_rate","comment_info","txt_comment","revContent","append_item","bg_bar","link_user","revName","time_write","revDate","num","link_function"],"mappings":"gLAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,MAAP,KAAmB,kCAAnB,CACA,MAAOC,CAAAA,QAAP,KAAqB,yBAArB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,WAAT,KAA4B,aAA5B,CAEA,eAAe,cAAmB,IAAhBC,CAAAA,SAAgB,MAAhBA,SAAgB,eACML,QAAQ,CAAC,EAAD,CADd,wCACvBM,UADuB,eACXC,aADW,eAE9B,GAAMC,CAAAA,OAAO,CAAGC,OAAO,CAACC,GAAR,CAAYC,iBAAZ,CAA8B,eAA9C,CACA,GAAMC,CAAAA,SAAS,CAAGH,OAAO,CAACC,GAAR,CAAYC,iBAAZ,CAA8B,iBAAhD,CACA,GAAME,CAAAA,UAAU,CAAGT,WAAW,CAAC,SAAAU,KAAK,QAAIA,CAAAA,KAAK,CAACC,cAAN,CAAqBF,UAAzB,EAAN,CAA9B,CACA,GAAMG,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAACV,UAAD,CAAgB,CAC5B,GAAGA,UAAU,CAACW,MAAX,GAAoB,CAAvB,CACA,MAAO,MAAP,CACA,GAAIC,CAAAA,OAAO,CAAG,CAAd,CACAZ,UAAU,CAACa,GAAX,CAAe,SAACC,QAAD,CAAc,CACzBF,OAAO,EAAIG,MAAM,CAACD,QAAQ,CAACE,OAAV,CAAjB,CACH,CAFD,EAGA,MAAO,CAACJ,OAAO,CAAGZ,UAAU,CAACW,MAAtB,EAA8BM,OAA9B,CAAsC,CAAtC,CAAP,CACH,CARD,CAUAxB,SAAS,CAAC,UAAM,CACZI,KAAK,CAACqB,GAAN,CAAUhB,OAAO,WAAMH,SAAN,CAAjB,EACKoB,IADL,CACU,SAACC,QAAD,CAAc,CAChBnB,aAAa,CAACmB,QAAQ,CAACC,IAAV,CAAb,CACH,CAHL,EAIKC,KAJL,CAIW,SAAAC,GAAG,CAAI,CAAG,CAJrB,EAKH,CANQ,CAMN,EANM,CAAT,CAQA,GAAMC,CAAAA,YAAY,CAAI,QAAhBA,CAAAA,YAAgB,CAACV,QAAD,CAAc,CAChC,GAAMW,CAAAA,aAAa,CAAGC,MAAM,CAACC,OAAP,CAAe,kBAAf,CAAtB,CACA,GAAIF,aAAa,GAAK,IAAtB,CAA4B,CACxB5B,KAAK,CAAC+B,MAAN,CAAatB,SAAb,CAAwB,CACpBe,IAAI,CAAEP,QADc,CAAxB,EAGKK,IAHL,CAGU,SAACC,QAAD,CAAc,CAChBS,OAAO,CAACC,GAAR,CAAYV,QAAQ,CAACC,IAArB,EACAU,KAAK,8EAAL,CACAL,MAAM,CAACM,QAAP,CAAgBC,MAAhB,CAAuB3B,SAAvB,EACH,CAPL,EAQKgB,KARL,CAQW,SAAAC,GAAG,CAAI,CAAEQ,KAAK,CAACR,GAAD,CAAL,CAAY,CARhC,EASH,CAVD,IAUO,CACHQ,KAAK,CAAC,UAAD,CAAL,CACAL,MAAM,CAACM,QAAP,CAAgBC,MAAhB,CAAuB3B,SAAvB,EACH,CACJ,CAhBD,CAkBA,mBAAO,qDACH,2BAAK,SAAS,CAAEX,MAAM,CAACuC,QAAvB,eACI,2BAAK,SAAS,CAAEvC,MAAM,CAACwC,OAAvB,eACI,2BAAK,SAAS,CAAExC,MAAM,CAACyC,UAAvB,eACI,8BAAQ,SAAS,CAAEzC,MAAM,CAAC0C,UAA1B,8BADJ,cAEI,2BAAK,SAAS,CAAE1C,MAAM,CAAC2C,UAAvB,eACI,0BAAI,SAAS,CAAE3C,MAAM,CAAC4C,QAAtB,8BAEA,oBAAC,QAAD,EAAU,KAAK,CAAE,CAAEC,KAAK,CAAE,SAAT,CAAoBC,QAAQ,CAAE,MAA9B,CAAjB,EAFA,CAGK/B,OAAO,CAACV,UAAD,CAAP,EAAuB,YAH5B,cAII,4BAAM,SAAS,CAAEL,MAAM,CAAC+C,SAAxB,EAJJ,CADJ,CAFJ,CADJ,cAYI,2BAAK,SAAS,CAAE/C,MAAM,CAACgD,iBAAvB,eACI,8BAAQ,SAAS,CAAEhD,MAAM,CAAC0C,UAA1B,EADJ,CAZJ,cAeI,0BAAI,SAAS,CAAE1C,MAAM,CAACiD,WAAtB,EACK5C,UAAU,CAACa,GAAX,CAAe,SAACC,QAAD,CAAc,CAC1B,mBACI,0BAAI,SAAS,CAAEnB,MAAM,CAACkD,OAAtB,eACI,2BAAK,SAAS,CAAElD,MAAM,CAACmD,SAAvB,eACI,0BAAI,SAAS,CAAEnD,MAAM,CAACoD,QAAtB,eACI,oBAAC,QAAD,EAAU,KAAK,CAAE,CAAEP,KAAK,CAAE,SAAT,CAAoBC,QAAQ,CAAE,MAA9B,CAAjB,EADJ,QAEW3B,QAAQ,CAACE,OAFpB,mBAGI,4BAAM,SAAS,CAAErB,MAAM,CAAC0C,UAAxB,WAHJ,CADJ,CADJ,cAQI,2BAAK,SAAS,CAAE1C,MAAM,CAACqD,YAAvB,eACI,yBAAG,SAAS,CAAErD,MAAM,CAACsD,WAArB,eACI,gCACKnC,QAAQ,CAACoC,UADd,CADJ,CADJ,cAMI,2BAAK,SAAS,CAAEvD,MAAM,CAACwD,WAAvB,eACI,yBAAG,SAAS,CAAExD,MAAM,CAACyD,MAArB,EADJ,cAEI,4BAAM,SAAS,CAAEzD,MAAM,CAAC0D,SAAxB,EACKvC,QAAQ,CAACwC,OADd,CAFJ,cAKI,yBAAG,SAAS,CAAE3D,MAAM,CAACyD,MAArB,EALJ,cAMI,4BAAM,SAAS,CAAEzD,MAAM,CAAC4D,UAAxB,EAAqCzC,QAAQ,CAAC0C,OAA9C,CANJ,CASK1C,QAAQ,CAAC2C,GAAT,EAAgBlD,UAAhB,cACD,4BAAM,SAAS,CAAEZ,MAAM,CAACiC,MAAxB,CACA,OAAO,CAAE,yBAAMJ,CAAAA,YAAY,CAACV,QAAD,CAAlB,EADT,eAEI,yBAAG,SAAS,CAAEnB,MAAM,CAACyD,MAArB,EAFJ,iBADC,cAKE,gCAdP,cAeA,yBAAG,SAAS,CAAEzD,MAAM,CAACyD,MAArB,EAfA,cAiBI,yBAAG,SAAS,CAAEzD,MAAM,CAAC+D,aAArB,EAjBJ,CANJ,CARJ,CADJ,CAqCH,CAtCA,CADL,CAfJ,CADJ,CADG,cA6DH,2BAAK,KAAK,CAAE,CAACjB,QAAQ,CAAC,OAAV,CAAZ,eAAgC,8BAAhC,CA7DG,CAAP,CA+DH,CAxGD","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport Styles from '../styles/ReviewList.module.scss'\nimport StarIcon from '@material-ui/icons/Star'\nimport axios from 'axios'\nimport { useSelector } from \"react-redux\";\n\nexport default ({ contentid }) => {\n    const [reviewList, setReviewList] = useState([])\n    const listURL = process.env.REACT_APP_API_URL+'/review/list/'\n    const deleteURL = process.env.REACT_APP_API_URL+'/review/delete/'\n    const currentNum = useSelector(state => state.accountReducer.currentNum)\n    const starAvg = (reviewList) => {\n        if(reviewList.length===0)\n        return false;\n        let starSum = 0\n        reviewList.map((reviewer) => {\n            starSum += Number(reviewer.revStar)\n        })\n        return (starSum / reviewList.length).toFixed(2)\n    }\n\n    useEffect(() => {\n        axios.get(listURL + `${contentid}`,)\n            .then((response) => {\n                setReviewList(response.data)\n            })\n            .catch(err => { })\n    }, [])\n\n    const deleteReview = ((reviewer) => {\n        const deleteConfirm = window.confirm('정말 리뷰를 삭제하시겠습니까?')\n        if (deleteConfirm === true) {\n            axios.delete(deleteURL, {\n                data: reviewer\n            })\n                .then((response) => {\n                    console.log(response.data)\n                    alert(`성공적으로 삭제하셨습니다.`)\n                    window.location.reload(deleteURL)\n                })\n                .catch(err => { alert(err) })\n        } else {\n            alert('취소하셨습니다.')\n            window.location.reload(deleteURL)\n        }\n    })\n\n    return <>\n        <div className={Styles.kContent}>\n            <div className={Styles.comment}>\n                <div className={Styles.ahead_info}>\n                    <strong className={Styles.screen_out}>평가 요약</strong>\n                    <div className={Styles.grade_star}>\n                        <em className={Styles.avg_rate}>\n                            평점\n                        <StarIcon style={{ color: '#3396ff', fontSize: '35px' }} />\n                            {starAvg(reviewList) || ' 리뷰가 없습니다.'}\n                            <span className={Styles.txt_score}></span>\n                        </em>\n                    </div>\n                </div>\n                <div className={Styles.evaluation_review}>\n                    <strong className={Styles.screen_out}></strong>\n                </div>\n                <ul className={Styles.reivew_form}>\n                    {reviewList.map((reviewer) => {\n                        return (\n                            <li className={Styles.liStyle}>\n                                <div className={Styles.star_info}>\n                                    <em className={Styles.num_rate}>\n                                        <StarIcon style={{ color: '#3396ff', fontSize: \"15px\" }} />\n                                        &nbsp;{reviewer.revStar}/5\n                                        <span className={Styles.screen_out}>점</span>\n                                    </em>\n                                </div>\n                                <div className={Styles.comment_info}>\n                                    <p className={Styles.txt_comment}>\n                                        <span>\n                                            {reviewer.revContent}\n                                        </span>\n                                    </p>\n                                    <div className={Styles.append_item}>\n                                        <a className={Styles.bg_bar}></a>\n                                        <span className={Styles.link_user}>\n                                            {reviewer.revName}\n                                        </span>\n                                        <a className={Styles.bg_bar}></a>\n                                        <span className={Styles.time_write}>{reviewer.revDate}</span>\n\n\n                                        {reviewer.num == currentNum ? \n                                        <span className={Styles.delete} \n                                        onClick={() => deleteReview(reviewer)}>\n                                            <a className={Styles.bg_bar}></a>\n                                                                     삭제 </span>\n                                        :  <span></span>  }\n                                    <a className={Styles.bg_bar}></a>\n\n                                        <a className={Styles.link_function}></a>\n                                    </div>\n                                </div>\n                            </li>\n                        )\n                    })\n                    }\n                </ul>\n            </div>\n        </div>\n        <div style={{fontSize:'120px'}}><br/></div>\n    </>\n}"]},"metadata":{},"sourceType":"module"}