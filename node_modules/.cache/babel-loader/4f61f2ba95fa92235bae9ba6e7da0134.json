{"ast":null,"code":"import _slicedToArray from \"/Users/suho/TeamProject/Spring/projectFinal/tripass/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/suho/TeamProject/Spring/projectFinal/tripass/react/src/webapp/pce/pages/PlaceList.jsx\";\n\nimport React, { useState, useEffect } from \"react\";\nimport styles from \"../styles/PlaceList.module.scss\";\nimport { useCustomState } from \"webapp/cmm/state/State\";\nimport { useParams } from \"react-router-dom\";\nimport { animateScroll as scroll } from \"react-scroll\";\nimport { BlogPagination, BlogSearch } from \"./\";\nimport BlogCard from \"webapp/pce/components/BlogCard/BlogCard\";\nimport axios from \"axios\";\nimport BlogCategories from \"webapp/pce/components/BlogCategories/BlogCategories\";\nimport { Button } from \"webapp/cmm/elements\";\nexport default (function (_ref) {\n  var _ref$sidebar = _ref.sidebar,\n      sidebar = _ref$sidebar === void 0 ? \"left\" : _ref$sidebar,\n      _ref$layout = _ref.layout,\n      layout = _ref$layout === void 0 ? \"grid\" : _ref$layout,\n      _ref$title = _ref.title,\n      title = _ref$title === void 0 ? \"title\" : _ref$title;\n  var state = useCustomState()[0];\n\n  var _useParams = useParams(),\n      category = _useParams.category;\n\n  var _useState = useState(1),\n      _useState2 = _slicedToArray(_useState, 2),\n      currentPage = _useState2[0],\n      setCurrentPage = _useState2[1];\n\n  var postsPerPage = useState(6)[0];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      placeArray = _useState4[0],\n      setPlaceArray = _useState4[1];\n\n  var URL = process.env.REACT_APP_API_URL;\n  useEffect(function () {\n    if (category) {\n      axios.get(\"\".concat(URL, \"/place/cat/\").concat(category)).then(function (data) {\n        setPlaceArray(data.data.map(function (post, index) {\n          return /*#__PURE__*/React.createElement(BlogCard, {\n            key: index,\n            layout: layout,\n            post: post,\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 33,\n              columnNumber: 17\n            }\n          });\n        }));\n      }).catch(function (err) {\n        alert(err);\n      });\n    } else {\n      axios.get(\"\".concat(URL, \"/place/list\")).then(function (resp) {\n        setPlaceArray(resp.data.map(function (post, index) {\n          return /*#__PURE__*/React.createElement(BlogCard, {\n            key: index,\n            layout: layout,\n            post: post,\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 49,\n              columnNumber: 17\n            }\n          });\n        }));\n      }).catch(function (err) {});\n    }\n\n    setCurrentPage(1);\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"section\", {\n    className: [styles.wrapper, sidebar === \"left\" ? styles.with_sidebar + \" \" + styles.left : sidebar === \"right\" ? styles.with_sidebar + \" \" + styles.right : null].join(\" \"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"aside\", {\n    className: styles.sidebar,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(BlogSearch, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(BlogCategories, {\n    data: state.data.categories,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    to: \"\".concat(URL, \"/place/add\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 11\n    }\n  }, \"관광지 추가\")), /*#__PURE__*/React.createElement(\"article\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: layout === \"grid\" ? styles.grid : layout === \"list\" ? styles.list : null,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 11\n    }\n  }, placeArray.slice((currentPage - 1) * postsPerPage, currentPage * postsPerPage)), /*#__PURE__*/React.createElement(BlogPagination, {\n    amount: Math.ceil(placeArray.length / postsPerPage),\n    current: currentPage,\n    next: function next() {\n      setCurrentPage(function (c) {\n        return c + 1;\n      });\n      scroll.scrollToTop();\n    },\n    prev: function prev() {\n      setCurrentPage(function (c) {\n        return c - 1;\n      });\n      scroll.scrollToTop();\n    },\n    goto: function goto(id) {\n      setCurrentPage(id);\n      scroll.scrollToTop();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 11\n    }\n  }))));\n});","map":{"version":3,"sources":["/Users/suho/TeamProject/Spring/projectFinal/tripass/react/src/webapp/pce/pages/PlaceList.jsx"],"names":["React","useState","useEffect","styles","useCustomState","useParams","animateScroll","scroll","BlogPagination","BlogSearch","BlogCard","axios","BlogCategories","Button","sidebar","layout","title","state","category","currentPage","setCurrentPage","postsPerPage","placeArray","setPlaceArray","URL","process","env","REACT_APP_API_URL","get","then","data","map","post","index","catch","err","alert","resp","wrapper","with_sidebar","left","right","join","categories","grid","list","slice","Math","ceil","length","c","scrollToTop","id"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport styles from \"../styles/PlaceList.module.scss\";\nimport { useCustomState } from \"webapp/cmm/state/State\";\nimport { useParams } from \"react-router-dom\";\nimport { animateScroll as scroll } from \"react-scroll\";\n\n\nimport {\n  BlogPagination,\n  BlogSearch\n} from \"./\";\n\nimport BlogCard from \"webapp/pce/components/BlogCard/BlogCard\";\nimport axios from \"axios\";\nimport BlogCategories from \"webapp/pce/components/BlogCategories/BlogCategories\";\nimport {Button} from \"webapp/cmm/elements\"\n\nexport default ({ sidebar = \"left\", layout = \"grid\", title = \"title\" }) => {\n  const state = useCustomState()[0];\n  const { category } = useParams();\n  const [currentPage, setCurrentPage] = useState(1);\n  const postsPerPage = useState(6)[0];\n  const [placeArray, setPlaceArray] = useState([]);\n  const URL = process.env.REACT_APP_API_URL\n\n  useEffect(() => {\n    if (category) {\n      axios.get(`${URL}/place/cat/${category}`)\n        .then((data) => {\n          setPlaceArray(\n            data.data.map((post, index) => {\n              return (\n                <BlogCard\n                  key={index}\n                  layout={layout}\n                  post={post} />\n              );\n            })\n          );\n        }).catch((err) => {\n          alert(err)\n        })\n    } else {\n      axios.get(`${URL}/place/list`)\n        .then(resp => {\n          setPlaceArray(\n            resp.data.map((post, index) => {\n              return (\n                <BlogCard\n                  key={index}\n                  layout={layout}\n                  post={post} />\n              );\n            })\n          );\n        })\n        .catch((err) => {\n        })\n    }\n    setCurrentPage(1);\n  }, []);\n\n  return (\n    <>\n      <section\n        className={[\n          styles.wrapper,\n          sidebar === \"left\"\n            ? styles.with_sidebar + \" \" + styles.left\n            : sidebar === \"right\"\n              ? styles.with_sidebar + \" \" + styles.right\n              : null,\n        ].join(\" \")}\n      >\n        <aside className={styles.sidebar}>\n          <BlogSearch />\n          <BlogCategories data={state.data.categories} />\n          <Button to={`${URL}/place/add`}>{\"관광지 추가\"}</Button>\n        </aside>\n\n        <article>\n          <div\n            className={\n              layout === \"grid\"\n                ? styles.grid\n                : layout === \"list\"\n                  ? styles.list\n                  : null\n            }\n          >\n            {placeArray.slice(\n              (currentPage - 1) * postsPerPage,\n              currentPage * postsPerPage\n            )}\n          </div>\n\n          <BlogPagination\n            amount={Math.ceil(placeArray.length / postsPerPage)}\n            current={currentPage}\n            next={() => {\n              setCurrentPage((c) => c + 1);\n              scroll.scrollToTop();\n            }}\n            prev={() => {\n              setCurrentPage((c) => c - 1);\n              scroll.scrollToTop();\n            }}\n            goto={(id) => {\n              setCurrentPage(id);\n              scroll.scrollToTop();\n            }}\n          />\n        </article>\n      </section>\n    </>\n  );\n};"]},"metadata":{},"sourceType":"module"}