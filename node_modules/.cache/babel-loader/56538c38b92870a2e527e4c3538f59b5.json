{"ast":null,"code":"import _slicedToArray from\"/Users/suho/TeamProject/Spring/projectFinal/tripass/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{SvgIcon,Table,TableBody,TableCell,TableFooter,TableHead,TableRow}from'@material-ui/core';import React,{useEffect,useState}from'react';import axios from'axios';import Pagination from'webapp/cmm/elements/Pagination/Pagination';import Card from'webapp/cmm/layouts/Card/Card';export default(function(){var URL=process.env.REACT_APP_API_URL;var arr=['설문번호','성별','나이대','목적지','상세보기','삭제하기'];var _useState=useState([]),_useState2=_slicedToArray(_useState,2),surveyList=_useState2[0],setSurveyList=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),surveyCount=_useState4[0],setSurveyCount=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),currentPage=_useState6[0],setCurrentPage=_useState6[1];var pageSize=10;var blockSize=10;var deleteSurvey=function deleteSurvey(item){console.log(item);if(window.confirm('정말 설문조사 정보를 삭제하시겠습니까??')){axios.delete(\"\".concat(URL,\"/survey/delete\"),{data:item}).then(alert('성공적으로 삭제하셨습니다.'),window.location.reload()).catch(function(err){alert('에러입니다.');});}};useEffect(function(){axios.get(\"\".concat(URL,\"/survey/count\")).then(function(res){setSurveyCount(res.data);});axios.get(\"\".concat(URL,\"/survey/list?page=\").concat(currentPage-1,\"&size=\").concat(pageSize)).then(function(res){setSurveyList(res.data.content);});},[currentPage]);var title=/*#__PURE__*/React.createElement(\"center\",null,/*#__PURE__*/React.createElement(\"h2\",null,\"\\uC124\\uBB38 \\uC870\\uC0AC \\uB370\\uC774\\uD130\"));var content=/*#__PURE__*/React.createElement(Table,null,/*#__PURE__*/React.createElement(TableHead,null,/*#__PURE__*/React.createElement(TableRow,null,arr.map(function(item){return/*#__PURE__*/React.createElement(TableCell,null,item);}))),/*#__PURE__*/React.createElement(TableBody,null,surveyList.map(function(item,key){return/*#__PURE__*/React.createElement(TableRow,{key:key},/*#__PURE__*/React.createElement(TableCell,null,item.svyNum),/*#__PURE__*/React.createElement(TableCell,null,item.gender),/*#__PURE__*/React.createElement(TableCell,null,item.age),/*#__PURE__*/React.createElement(TableCell,null,item.location),/*#__PURE__*/React.createElement(TableCell,null,/*#__PURE__*/React.createElement(SvgIcon,null,/*#__PURE__*/React.createElement(\"path\",{fill:\"currentColor\",d:\"M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z\"}))),/*#__PURE__*/React.createElement(TableCell,{onClick:function onClick(){deleteSurvey(item);}},/*#__PURE__*/React.createElement(SvgIcon,null,/*#__PURE__*/React.createElement(\"path\",{fill:\"currentColor\",d:\"M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M7,6H17V19H7V6M9,8V17H11V8H9M13,8V17H15V8H13Z\"}))));})),/*#__PURE__*/React.createElement(TableFooter,null,/*#__PURE__*/React.createElement(TableRow,null,/*#__PURE__*/React.createElement(\"td\",{colSpan:\"6\"},/*#__PURE__*/React.createElement(Pagination,{pageCount:Math.ceil(surveyCount/pageSize),pageNum:currentPage,setPage:setCurrentPage,blockSize:blockSize})))));return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Card,{header:title,body:content}));});","map":{"version":3,"sources":["/Users/suho/TeamProject/Spring/projectFinal/tripass/react/src/webapp/svy/components/SurveyList.jsx"],"names":["SvgIcon","Table","TableBody","TableCell","TableFooter","TableHead","TableRow","React","useEffect","useState","axios","Pagination","Card","URL","process","env","REACT_APP_API_URL","arr","surveyList","setSurveyList","surveyCount","setSurveyCount","currentPage","setCurrentPage","pageSize","blockSize","deleteSurvey","item","console","log","window","confirm","delete","data","then","alert","location","reload","catch","err","get","res","content","title","map","key","svyNum","gender","age","Math","ceil"],"mappings":"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","sourcesContent":["import { SvgIcon, Table, TableBody, TableCell, TableFooter, TableHead, TableRow } from '@material-ui/core'\nimport React,{useEffect, useState} from 'react'\nimport axios from 'axios'\nimport Pagination from 'webapp/cmm/elements/Pagination/Pagination'\nimport Card from 'webapp/cmm/layouts/Card/Card'\n\nexport default ()=>{\n    const URL = process.env.REACT_APP_API_URL\n    \n    const arr = ['설문번호','성별','나이대','목적지','상세보기','삭제하기']\n    const [surveyList,setSurveyList] = useState([]);\n    const [surveyCount,setSurveyCount] = useState(0)\n    const [currentPage,setCurrentPage] = useState(1)\n    const pageSize = 10\n    const blockSize = 10\n\n    const deleteSurvey = (item)=>{\n        console.log(item)\n        if(window.confirm('정말 설문조사 정보를 삭제하시겠습니까??')){\n            axios.delete(`${URL}/survey/delete`,{\n                data:item\n            })\n            .then(\n                alert('성공적으로 삭제하셨습니다.'),\n                window.location.reload()\n            ).catch((err) => {\n                alert('에러입니다.')\n              })\n        }\n    }\n\n    useEffect(()=>{\n        axios.get(`${URL}/survey/count`)\n        .then(res=>{setSurveyCount(res.data)})\n        axios.get(`${URL}/survey/list?page=${currentPage-1}&size=${pageSize}`)\n        .then(res=>{setSurveyList(res.data.content)})\n    },[currentPage])\n\n    const title = <center><h2>설문 조사 데이터</h2></center>\n    const content = <Table>\n        <TableHead>\n            <TableRow>\n                {arr.map((item)=>{\n                    return <TableCell>{item}</TableCell>\n                })}\n            </TableRow>\n        </TableHead>\n        <TableBody>\n            {surveyList.map((item,key)=>{\n                return(\n                    <TableRow key={key}>\n                        <TableCell>{item.svyNum}</TableCell>\n                        <TableCell>{item.gender}</TableCell>\n                        <TableCell>{item.age}</TableCell>\n                        <TableCell>{item.location}</TableCell>\n                        <TableCell><SvgIcon><path fill=\"currentColor\" d=\"M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z\" /></SvgIcon></TableCell>\n                        <TableCell onClick={()=>{deleteSurvey(item)}}><SvgIcon><path fill=\"currentColor\" d=\"M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M7,6H17V19H7V6M9,8V17H11V8H9M13,8V17H15V8H13Z\" /></SvgIcon></TableCell>\n                    </TableRow>\n                )\n            })}\n        </TableBody>\n        <TableFooter>\n            <TableRow>\n                <td colSpan='6'>\n                <Pagination\n                    pageCount={Math.ceil(surveyCount/pageSize)}\n                    pageNum={currentPage}\n                    setPage={setCurrentPage}\n                    blockSize={blockSize}\n                /></td>\n            </TableRow>\n        </TableFooter>\n    </Table>\n\n    return <>\n    <Card header={title} body={content}/>\n    </>\n}"]},"metadata":{},"sourceType":"module"}