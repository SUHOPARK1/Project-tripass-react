{"ast":null,"code":"import _slicedToArray from \"/Users/suho/TeamProject/Spring/projectFinal/tripass/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/suho/TeamProject/Spring/projectFinal/tripass/react/src/webapp/usr/pages/UserList.jsx\";\n\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport styles from '../styles/UserList.module.scss';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport Pagination from 'webapp/cmm/elements/Pagination/Pagination';\nimport Card from 'webapp/cmm/layouts/Card/Card';\nimport { Table, TableBody, TableCell, TableFooter, TableHead, TableRow } from '@material-ui/core';\nexport default (function () {\n  var usr = ['번호', '권한', '가입 플랫폼', '소셜 ID', '고객성함', '이메일주소', '연령대', '성별', '가입날짜', '회원탈퇴'];\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      userList = _useState2[0],\n      setUserList = _useState2[1];\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      userCount = _useState4[0],\n      setUserCount = _useState4[1];\n\n  var _useState5 = useState(1),\n      _useState6 = _slicedToArray(_useState5, 2),\n      currentPage = _useState6[0],\n      setCurrentPage = _useState6[1];\n\n  var pageSize = 10;\n  var blockSize = 10;\n  var countURL = process.env.REACT_APP_API_URL + '/user/count';\n  var deleteURL = process.env.REACT_APP_API_URL + '/user/delete';\n  useEffect(function () {\n    axios.get(countURL).then(function (respone) {\n      setUserCount(respone.data);\n    });\n    axios.get(\"\".concat(process.env.REACT_APP_API_URL, \"/user/list?page=\").concat(currentPage - 1, \"&size=\").concat(pageSize)).then(function (response) {\n      setUserList(response.data.content);\n    }).catch(function (err) {\n      alert(err);\n    });\n  }, [currentPage]);\n\n  var deleteUser = function deleteUser(user) {\n    var deleteConfirm = window.confirm('정말 유저정보를 삭제하시겠습니까?');\n\n    if (deleteConfirm === true) {\n      axios.delete(deleteURL, {\n        data: {\n          num: user.num\n        }\n      }).then(function (response) {\n        console.log(response.data);\n        alert(\"\".concat(user.username, \"\\uACE0\\uAC1D\\uB2D8 \\uC815\\uBCF4\\uB97C \\uC0AD\\uC81C\\uD558\\uC168\\uC2B5\\uB2C8\\uB2E4.\"));\n        window.location.reload();\n      }).catch(function (err) {\n        alert(err);\n      });\n    } else {\n      alert('유저정보 삭제를 취소하셨습니다.');\n      window.location.reload();\n    }\n  };\n\n  var title = /*#__PURE__*/React.createElement(\"center\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 25\n    }\n  }, \" \\uACE0\\uAC1D \\uC815\\uBCF4 \\uB370\\uC774\\uD130\"), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 44\n    }\n  }, \"\\u203B \\uAD6C\\uAE00\\uC740 \\uC131\\uBCC4\\uACFC \\uC5F0\\uB839\\uB300\\uB97C \\uC800\\uC7A5\\uD560 \\uC218 \\uC5C6\\uC2B5\\uB2C8\\uB2E4. (\\uAD6C\\uAE00 \\uC815\\uCC45\\uC0AC\\uD56D)\"), \" \");\n  var content = /*#__PURE__*/React.createElement(Table, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(TableHead, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TableRow, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }\n  }, usr.map(function (user) {\n    return /*#__PURE__*/React.createElement(TableCell, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 20\n      }\n    }, user);\n  }))), /*#__PURE__*/React.createElement(TableBody, {\n    className: styles.body,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }\n  }, userList.map(function (user, key) {\n    return /*#__PURE__*/React.createElement(TableRow, {\n      key: key,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(TableCell, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 15\n      }\n    }, user.num), /*#__PURE__*/React.createElement(TableCell, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 15\n      }\n    }, user.role), /*#__PURE__*/React.createElement(TableCell, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 15\n      }\n    }, user.provider), /*#__PURE__*/React.createElement(TableCell, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 15\n      }\n    }, user.providerId), /*#__PURE__*/React.createElement(TableCell, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 15\n      }\n    }, user.username), /*#__PURE__*/React.createElement(TableCell, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 15\n      }\n    }, user.email), /*#__PURE__*/React.createElement(TableCell, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 15\n      }\n    }, user.age), /*#__PURE__*/React.createElement(TableCell, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 15\n      }\n    }, user.gender), /*#__PURE__*/React.createElement(TableCell, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 15\n      }\n    }, user.createDate), /*#__PURE__*/React.createElement(TableCell, {\n      onClick: function onClick() {\n        return deleteUser(user);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.svg,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(DeleteIcon, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 45\n      }\n    }))));\n  })), /*#__PURE__*/React.createElement(TableFooter, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TableRow, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    colSpan: \"10\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      margin: 0\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Pagination, {\n    pageCount: Math.ceil(userCount / pageSize),\n    pageNum: currentPage,\n    setPage: setCurrentPage,\n    blockSize: blockSize,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 11\n    }\n  }))))));\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Card, {\n    header: title,\n    body: content,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 5\n    }\n  }));\n});","map":{"version":3,"sources":["/Users/suho/TeamProject/Spring/projectFinal/tripass/react/src/webapp/usr/pages/UserList.jsx"],"names":["React","useEffect","useState","axios","styles","DeleteIcon","Pagination","Card","Table","TableBody","TableCell","TableFooter","TableHead","TableRow","usr","userList","setUserList","userCount","setUserCount","currentPage","setCurrentPage","pageSize","blockSize","countURL","process","env","REACT_APP_API_URL","deleteURL","get","then","respone","data","response","content","catch","err","alert","deleteUser","user","deleteConfirm","window","confirm","delete","num","console","log","username","location","reload","title","map","body","key","role","provider","providerId","email","age","gender","createDate","svg","margin","Math","ceil"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport axios from 'axios'\nimport styles from '../styles/UserList.module.scss'\nimport DeleteIcon from '@material-ui/icons/Delete'\nimport Pagination from 'webapp/cmm/elements/Pagination/Pagination'\nimport Card from 'webapp/cmm/layouts/Card/Card'\nimport { Table, TableBody, TableCell, TableFooter, TableHead, TableRow } from '@material-ui/core'\n\nexport default () => {\n  const usr = ['번호', '권한', '가입 플랫폼', '소셜 ID', '고객성함', '이메일주소', '연령대', '성별', '가입날짜', '회원탈퇴']\n  const [userList, setUserList] = useState([])\n  const [userCount, setUserCount] = useState(0)\n  const [currentPage, setCurrentPage] = useState(1)\n  const pageSize = 10\n  const blockSize = 10\n  const countURL = process.env.REACT_APP_API_URL+'/user/count'\n  const deleteURL = process.env.REACT_APP_API_URL+'/user/delete'\n\n  useEffect(() => {\n    axios.get(countURL)\n      .then(respone => { setUserCount(respone.data) })\n    axios.get(`${process.env.REACT_APP_API_URL}/user/list?page=${currentPage - 1}&size=${pageSize}`)\n      .then((response) => { setUserList(response.data.content) })\n      .catch(err => { alert(err) })\n  }, [currentPage])\n\n  const deleteUser = ((user) => {\n    const deleteConfirm = window.confirm('정말 유저정보를 삭제하시겠습니까?')\n    if (deleteConfirm === true) {\n      axios.delete(deleteURL, {\n        data: { num: user.num }\n      })\n        .then((response) => {\n          console.log(response.data)\n          alert(`${user.username}고객님 정보를 삭제하셨습니다.`)\n          window.location.reload()\n        })\n        .catch(err => { alert(err) })\n    } else {\n      alert('유저정보 삭제를 취소하셨습니다.')\n      window.location.reload()\n    }\n  })\n  const title = <center><h2> 고객 정보 데이터</h2><h3>※ 구글은 성별과 연령대를 저장할 수 없습니다. (구글 정책사항)</h3> </center>\n  const content =\n    <Table>\n      <TableHead >\n        <TableRow>\n          {usr.map((user) => {\n            return <TableCell>{user}</TableCell>\n          })}\n        </TableRow>\n      </TableHead>\n      <TableBody className={styles.body}>\n        {userList.map((user, key) => {\n          return (\n            <TableRow key={key}>\n              <TableCell>{user.num}</TableCell>\n              <TableCell>{user.role}</TableCell>\n              <TableCell>{user.provider}</TableCell>\n              <TableCell>{user.providerId}</TableCell>\n              <TableCell>{user.username}</TableCell>\n              <TableCell>{user.email}</TableCell>\n              <TableCell>{user.age}</TableCell>\n              <TableCell>{user.gender}</TableCell>\n              <TableCell>{user.createDate}</TableCell>\n              <TableCell onClick={() => deleteUser(user)}>\n                <div className={styles.svg}><DeleteIcon /></div>\n              </TableCell>\n            </TableRow>\n          )\n        })}\n      </TableBody>\n\n      <TableFooter>\n        <TableRow>\n          <td  colSpan='10'>\n            <div style={{margin:0}}>\n          <Pagination\n            pageCount={Math.ceil(userCount / pageSize)}\n            pageNum={currentPage}\n            setPage={setCurrentPage}\n            blockSize={blockSize}/>\n            </div>\n          </td>\n        </TableRow>\n      </TableFooter>\n    </Table>\n\n  return <>\n    <Card header={title} body={content} />\n  </>\n\n\n}"]},"metadata":{},"sourceType":"module"}