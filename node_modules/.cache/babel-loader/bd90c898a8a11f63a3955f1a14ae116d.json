{"ast":null,"code":"import _slicedToArray from\"/Users/suho/TeamProject/Spring/projectFinal/tripass/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import emailjs from\"emailjs-com\";import styles from\"./RequestForm.module.scss\";import{CardButton,Backdrop}from\"../../ui\";import{Spinner}from\"../../elements\";import{useCustomState}from\"../../../state/state\";export default(function(_ref){var style=_ref.style;var _useCustomState=useCustomState(),_useCustomState2=_slicedToArray(_useCustomState,2),state=_useCustomState2[0],actions=_useCustomState2[1];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),sending=_useState2[0],setSending=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),status=_useState4[0],setStatus=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),email=_useState8[0],setEmail=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),request=_useState10[0],setRequest=_useState10[1];useEffect(function(){setRequest(state.request.text);},[state.request.text]);var templateParams={email:email,request:request};var validateEmail=function validateEmail(email){var re=/\\S+@\\S+\\.\\S+/;return re.test(email);};var onSubmit=function onSubmit(){if(!validateEmail(email)){setStatus(\"Incorrect email address\");setError(true);return;}if(request===\"\"){setStatus(\"Please enter your request\");setError(true);return;}setSending(true);emailjs.send(\"yandex\",\"request\",templateParams,\"user_uF8hjeTp0VsUn0ZMJGpee\").then(function(response){setSending(false);setError(false);setStatus(\"Your request has been sent!\");},function(err){setSending(false);setError(true);setStatus(\"Sorry. There is an error: \"+err.text);});resetForm();};var resetForm=function resetForm(){setEmail(\"\");setRequest(\"\");};var loading=sending&&/*#__PURE__*/React.createElement(\"div\",{className:styles.loading},/*#__PURE__*/React.createElement(Spinner,null));return/*#__PURE__*/React.createElement(\"div\",{className:[styles.wrapper,state.request.modal&&styles.show].join(\" \")},/*#__PURE__*/React.createElement(\"div\",{className:styles.modal},/*#__PURE__*/React.createElement(\"i\",{onClick:function onClick(){return actions.toogleRequest();},className:\"las la-times\"}),/*#__PURE__*/React.createElement(\"form\",{style:style,className:styles.form},loading,/*#__PURE__*/React.createElement(CardButton,{click:onSubmit,btn_after:\"\\uF107\",btn_text:\"Send message\",btn_type:\"solid-color-tb\",btn_hoverType:\"solid-gray-tb\",btn_align:\"stretch\",padding:true},/*#__PURE__*/React.createElement(\"div\",{className:styles.contact_form},/*#__PURE__*/React.createElement(\"span\",{className:[styles.status,error&&styles.error].join(\" \")},status),/*#__PURE__*/React.createElement(\"h4\",null,\"Send new request:\"),/*#__PURE__*/React.createElement(\"textarea\",{value:request,onChange:function onChange(e){return setRequest(e.target.value);},rows:\"10\",placeholder:\"Enter your request\"}),/*#__PURE__*/React.createElement(\"input\",{value:email,onChange:function onChange(e){return setEmail(e.target.value);},type:\"email\",placeholder:\"Email address *\"}))))),/*#__PURE__*/React.createElement(Backdrop,null));});","map":{"version":3,"sources":["/Users/suho/TeamProject/Spring/projectFinal/tripass/react/src/components/ui/RequestForm/RequestForm.js"],"names":["React","useState","useEffect","emailjs","styles","CardButton","Backdrop","Spinner","useCustomState","style","state","actions","sending","setSending","status","setStatus","error","setError","email","setEmail","request","setRequest","text","templateParams","validateEmail","re","test","onSubmit","send","then","response","err","resetForm","loading","wrapper","modal","show","join","toogleRequest","form","contact_form","e","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport emailjs from \"emailjs-com\";\nimport styles from \"./RequestForm.module.scss\";\nimport { CardButton, Backdrop } from \"../../ui\";\nimport { Spinner } from \"../../elements\";\nimport { useCustomState } from \"../../../state/state\";\n\nexport default ({ style }) => {\n  const [state, actions] = useCustomState();\n\n  const [sending, setSending] = useState(false);\n  const [status, setStatus] = useState(\"\");\n  const [error, setError] = useState(false);\n\n  const [email, setEmail] = useState(\"\");\n  const [request, setRequest] = useState(\"\");\n\n  useEffect(() => {\n    setRequest(state.request.text);\n  }, [state.request.text]);\n\n  const templateParams = {\n    email: email,\n    request: request,\n  };\n\n  const validateEmail = (email) => {\n    var re = /\\S+@\\S+\\.\\S+/;\n    return re.test(email);\n  };\n\n  const onSubmit = () => {\n    if (!validateEmail(email)) {\n      setStatus(\"Incorrect email address\");\n      setError(true);\n      return;\n    }\n\n    if (request === \"\") {\n      setStatus(\"Please enter your request\");\n      setError(true);\n      return;\n    }\n\n    setSending(true);\n    emailjs\n      .send(\"yandex\", \"request\", templateParams, \"user_uF8hjeTp0VsUn0ZMJGpee\")\n      .then(\n        (response) => {\n          setSending(false);\n          setError(false);\n          setStatus(\"Your request has been sent!\");\n        },\n        (err) => {\n          setSending(false);\n          setError(true);\n          setStatus(\"Sorry. There is an error: \" + err.text);\n        }\n      );\n    resetForm();\n  };\n\n  const resetForm = () => {\n    setEmail(\"\");\n    setRequest(\"\");\n  };\n\n  const loading = sending && (\n    <div className={styles.loading}>\n      <Spinner />\n    </div>\n  );\n\n  return (\n    <div\n      className={[styles.wrapper, state.request.modal && styles.show].join(\" \")}\n    >\n      <div className={styles.modal}>\n        <i onClick={() => actions.toogleRequest()} className=\"las la-times\" />\n        <form style={style} className={styles.form}>\n          {loading}\n          <CardButton\n            click={onSubmit}\n            btn_after=\"&#xf107;\"\n            btn_text=\"Send message\"\n            btn_type=\"solid-color-tb\"\n            btn_hoverType=\"solid-gray-tb\"\n            btn_align=\"stretch\"\n            padding\n          >\n            <div className={styles.contact_form}>\n              <span\n                className={[styles.status, error && styles.error].join(\" \")}\n              >\n                {status}\n              </span>\n              <h4>Send new request:</h4>\n              <textarea\n                value={request}\n                onChange={(e) => setRequest(e.target.value)}\n                rows=\"10\"\n                placeholder=\"Enter your request\"\n              />\n              <input\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                type=\"email\"\n                placeholder=\"Email address *\"\n              />\n            </div>\n          </CardButton>\n        </form>\n      </div>\n      <Backdrop />\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}