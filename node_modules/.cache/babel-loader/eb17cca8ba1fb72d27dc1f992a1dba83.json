{"ast":null,"code":"import _slicedToArray from\"/Users/suho/TeamProject/Spring/projectFinal/tripass/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import ReactStars from\"react-rating-stars-component\";import Styles from'../styles/ReviewInput.module.scss';import Axios from'axios';import moment from'moment';import{useSelector}from\"react-redux\";export default(function(_ref){var contentid=_ref.contentid;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),rate=_useState2[0],setRate=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),textsection=_useState4[0],setSection=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),textlength=_useState6[0],setLength=_useState6[1];var nowtime=moment().format('YYYY.MM.DD.');var inputURL=process.env.REACT_APP_API_URL+'/review/save/';var authorization=useSelector(function(state){return state.accountReducer.authorization;});var currentName=useSelector(function(state){return state.accountReducer.currentName;});var currentNum=useSelector(function(state){return state.accountReducer.currentNum;});var textArray=['진짜 별로에요...','별로에요...','그냥 그래요.','좋아요!','너무 좋아요!!'];var ratingChanged=function ratingChanged(newRating){setRate(newRating);};useEffect(function(){setLength(textsection.length);},[textsection]);var reviewSubmit=function reviewSubmit(e){e.preventDefault();if(authorization==='public'){var confirm=window.confirm('로그인을 해주세요.');if(confirm===true){console.log(confirm);return window.location.href='/login';}}else{if(textsection===\"\"||rate===0){alert('별점과 리뷰를 모두 작성해 주세요.');}else{Axios.post(inputURL,{contentid:contentid,revContent:textsection,revDate:nowtime,revName:\"\".concat(currentName),revStar:\"\".concat(rate),num:currentNum}).then(function(respone){alert('성공적으로 등록 하셨습니다.');window.location.reload('/review/save');}).catch(function(err){console.log(err);});}}};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:Styles.kContent},/*#__PURE__*/React.createElement(\"div\",{className:Styles.comment},/*#__PURE__*/React.createElement(\"div\",{className:Styles.evaluation_place},/*#__PURE__*/React.createElement(\"form\",{className:Styles.commentUpdateForm},/*#__PURE__*/React.createElement(\"fieldset\",{className:Styles.fieldsetForm},/*#__PURE__*/React.createElement(\"div\",{className:Styles.grade_star},/*#__PURE__*/React.createElement(\"span\",{className:Styles.ico_star_inner_star,Style:{width:\"0%\",height:\"1%\"}}),/*#__PURE__*/React.createElement(\"div\",{className:Styles.starform},/*#__PURE__*/React.createElement(ReactStars,{classNames:Styles.rateStar,count:5,onChange:ratingChanged,size:40,emptyIcon:true,activeColor:\"#1E90FF\"})),/*#__PURE__*/React.createElement(\"em\",{className:Styles.num_rate},/*#__PURE__*/React.createElement(\"span\",{className:Styles.txt_g},\" \",rate,\"/5 \\uC810 \")),/*#__PURE__*/React.createElement(\"span\",{className:Styles.txt_word},\" \",rate===0?'평가해주세요':textArray[rate-1],\" \")),/*#__PURE__*/React.createElement(\"div\",{className:Styles.write_review},/*#__PURE__*/React.createElement(\"textarea\",{placeholder:\"\\uC791\\uC131\\uD55C \\uD3C9\\uAC00\\uB294 \\uD574\\uB2F9 \\uC7A5\\uC18C\\uC5D0 \\uACF5\\uAC1C\\uB418\\uBA70, \\uB2E4\\uB978 \\uC0AC\\uC6A9\\uC790\\uAC00 \\uBCFC \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4.\\r\\n\\uB610\\uD55C, \\uC218\\uC815\\uD558\\uC2E4 \\uC218 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\\r\\n\\uAE00\\uC790\\uC218\\uB294 150\\uC790\\uB97C \\uB118\\uC744 \\uC218 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\",id:\"text1\",className:Styles.contents,maxlength:\"150\",onChange:function onChange(e){setSection(e.target.value);}})))),/*#__PURE__*/React.createElement(\"div\",{className:Styles.agree_review},/*#__PURE__*/React.createElement(\"span\",{className:Styles.num_letter_txt_len_warp},/*#__PURE__*/React.createElement(\"span\",{className:Styles.screen_out},\"\\uB4F1\\uB85D\\uD55C \\uAE00\\uC790\\uC218:\"),/*#__PURE__*/React.createElement(\"span\",{className:Styles.txt_len},textlength),/*#__PURE__*/React.createElement(\"span\",{className:Styles.num_total},\"/ 150\")),/*#__PURE__*/React.createElement(\"button\",{className:Styles.btn_enroll,onClick:reviewSubmit},\"\\uB4F1\\uB85D\"))))));});","map":{"version":3,"sources":["/Users/suho/TeamProject/Spring/projectFinal/tripass/react/src/webapp/rev/pages/ReviewInput.jsx"],"names":["React","useEffect","useState","ReactStars","Styles","Axios","moment","useSelector","contentid","rate","setRate","textsection","setSection","textlength","setLength","nowtime","format","inputURL","process","env","REACT_APP_API_URL","authorization","state","accountReducer","currentName","currentNum","textArray","ratingChanged","newRating","length","reviewSubmit","e","preventDefault","confirm","window","console","log","location","href","alert","post","revContent","revDate","revName","revStar","num","then","respone","reload","catch","err","kContent","comment","evaluation_place","commentUpdateForm","fieldsetForm","grade_star","ico_star_inner_star","width","height","starform","rateStar","num_rate","txt_g","txt_word","write_review","contents","target","value","agree_review","num_letter_txt_len_warp","screen_out","txt_len","num_total","btn_enroll"],"mappings":"gLAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CAEA,MAAOC,CAAAA,UAAP,KAAuB,8BAAvB,CACA,MAAOC,CAAAA,MAAP,KAAmB,mCAAnB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,QAAnB,CACA,OAASC,WAAT,KAA4B,aAA5B,CAEA,eAAe,cAAiB,IAAfC,CAAAA,SAAe,MAAfA,SAAe,eACJN,QAAQ,CAAC,CAAD,CADJ,wCACrBO,IADqB,eACfC,OADe,8BAEMR,QAAQ,CAAC,EAAD,CAFd,yCAErBS,WAFqB,eAERC,UAFQ,8BAGIV,QAAQ,CAAC,CAAD,CAHZ,yCAGrBW,UAHqB,eAGTC,SAHS,eAI5B,GAAMC,CAAAA,OAAO,CAAGT,MAAM,GAAGU,MAAT,CAAgB,aAAhB,CAAhB,CACA,GAAMC,CAAAA,QAAQ,CAAGC,OAAO,CAACC,GAAR,CAAYC,iBAAZ,CAA8B,eAA/C,CACA,GAAMC,CAAAA,aAAa,CAAGd,WAAW,CAAC,SAAAe,KAAK,QAAIA,CAAAA,KAAK,CAACC,cAAN,CAAqBF,aAAzB,EAAN,CAAjC,CACA,GAAMG,CAAAA,WAAW,CAAGjB,WAAW,CAAC,SAAAe,KAAK,QAAIA,CAAAA,KAAK,CAACC,cAAN,CAAqBC,WAAzB,EAAN,CAA/B,CACA,GAAMC,CAAAA,UAAU,CAAGlB,WAAW,CAAC,SAAAe,KAAK,QAAIA,CAAAA,KAAK,CAACC,cAAN,CAAqBE,UAAzB,EAAN,CAA9B,CACA,GAAMC,CAAAA,SAAS,CAAG,CAAC,YAAD,CAAe,SAAf,CAA0B,SAA1B,CAAqC,MAArC,CAA6C,UAA7C,CAAlB,CACA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,SAAD,CAAe,CACjClB,OAAO,CAACkB,SAAD,CAAP,CACH,CAFD,CAGA3B,SAAS,CAAC,UAAM,CAAEa,SAAS,CAACH,WAAW,CAACkB,MAAb,CAAT,CAA+B,CAAxC,CAA0C,CAAClB,WAAD,CAA1C,CAAT,CAEA,GAAMmB,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,CAAD,CAAO,CACxBA,CAAC,CAACC,cAAF,GACA,GAAGX,aAAa,GAAK,QAArB,CAA+B,CAC3B,GAAMY,CAAAA,OAAO,CAAGC,MAAM,CAACD,OAAP,CAAe,YAAf,CAAhB,CACA,GAAGA,OAAO,GAAK,IAAf,CAAoB,CAChBE,OAAO,CAACC,GAAR,CAAYH,OAAZ,EACA,MAAOC,CAAAA,MAAM,CAACG,QAAP,CAAgBC,IAAhB,CAAqB,QAA5B,CACH,CACJ,CAND,IAMK,CACD,GAAG3B,WAAW,GAAG,EAAd,EAAoBF,IAAI,GAAG,CAA9B,CAAgC,CAC5B8B,KAAK,CAAC,qBAAD,CAAL,CACH,CAFD,IAEK,CACDlC,KAAK,CAACmC,IAAN,CAAWvB,QAAX,CAAqB,CACjBT,SAAS,CAAEA,SADM,CAEjBiC,UAAU,CAAE9B,WAFK,CAGjB+B,OAAO,CAAE3B,OAHQ,CAIjB4B,OAAO,WAAKnB,WAAL,CAJU,CAKjBoB,OAAO,WAAKnC,IAAL,CALU,CAMjBoC,GAAG,CAAEpB,UANY,CAArB,EAOGqB,IAPH,CAOQ,SAACC,OAAD,CAAa,CACjBR,KAAK,CAAC,iBAAD,CAAL,CACAL,MAAM,CAACG,QAAP,CAAgBW,MAAhB,CAAuB,cAAvB,EAAuC,CAT3C,EAUKC,KAVL,CAUW,SAACC,GAAD,CAAS,CAAEf,OAAO,CAACC,GAAR,CAAYc,GAAZ,EAAkB,CAVxC,EAU0C,CAC7C,CACJ,CAxBL,CA0BA,mBAAO,qDACH,2BAAK,SAAS,CAAE9C,MAAM,CAAC+C,QAAvB,eACI,2BAAK,SAAS,CAAE/C,MAAM,CAACgD,OAAvB,eACI,2BAAK,SAAS,CAAEhD,MAAM,CAACiD,gBAAvB,eACI,4BAAM,SAAS,CAAEjD,MAAM,CAACkD,iBAAxB,eACI,gCAAU,SAAS,CAAElD,MAAM,CAACmD,YAA5B,eACI,2BAAK,SAAS,CAAEnD,MAAM,CAACoD,UAAvB,eACI,4BAAM,SAAS,CAAEpD,MAAM,CAACqD,mBAAxB,CAA6C,KAAK,CAAE,CAAEC,KAAK,CAAE,IAAT,CAAeC,MAAM,CAAE,IAAvB,CAApD,EADJ,cAEI,2BAAK,SAAS,CAAEvD,MAAM,CAACwD,QAAvB,eACI,oBAAC,UAAD,EACI,UAAU,CAAExD,MAAM,CAACyD,QADvB,CAEI,KAAK,CAAE,CAFX,CAEc,QAAQ,CAAElC,aAFxB,CAEuC,IAAI,CAAE,EAF7C,CAGI,SAAS,KAHb,CAGc,WAAW,CAAC,SAH1B,EADJ,CAFJ,cAQI,0BAAI,SAAS,CAAEvB,MAAM,CAAC0D,QAAtB,eACI,4BAAM,SAAS,CAAE1D,MAAM,CAAC2D,KAAxB,MAAiCtD,IAAjC,cADJ,CARJ,cAWI,4BAAM,SAAS,CAAEL,MAAM,CAAC4D,QAAxB,MAAoCvD,IAAI,GAAK,CAAT,CAAa,QAAb,CAAwBiB,SAAS,CAACjB,IAAI,CAAG,CAAR,CAArE,KAXJ,CADJ,cAcI,2BAAK,SAAS,CAAEL,MAAM,CAAC6D,YAAvB,eACI,gCAAU,WAAW,CAAC,oVAAtB,CACI,EAAE,CAAC,OADP,CAEI,SAAS,CAAE7D,MAAM,CAAC8D,QAFtB,CAGI,SAAS,CAAC,KAHd,CAII,QAAQ,CAAE,kBAACnC,CAAD,CAAO,CAAEnB,UAAU,CAACmB,CAAC,CAACoC,MAAF,CAASC,KAAV,CAAV,CAA4B,CAJnD,EADJ,CAdJ,CADJ,CADJ,cA0BI,2BAAK,SAAS,CAAEhE,MAAM,CAACiE,YAAvB,eACI,4BAAM,SAAS,CAAEjE,MAAM,CAACkE,uBAAxB,eACI,4BAAM,SAAS,CAAElE,MAAM,CAACmE,UAAxB,2CADJ,cAEI,4BAAM,SAAS,CAAEnE,MAAM,CAACoE,OAAxB,EAAkC3D,UAAlC,CAFJ,cAGI,4BAAM,SAAS,CAAET,MAAM,CAACqE,SAAxB,UAHJ,CADJ,cAMI,8BAAQ,SAAS,CAAErE,MAAM,CAACsE,UAA1B,CAAsC,OAAO,CAAE5C,YAA/C,iBANJ,CA1BJ,CADJ,CADJ,CADG,CAAP,CAyCH,CAlFD","sourcesContent":["import React, { useEffect, useState } from 'react'\n\nimport ReactStars from \"react-rating-stars-component\";\nimport Styles from '../styles/ReviewInput.module.scss'\nimport Axios from 'axios'\nimport moment from 'moment';\nimport { useSelector } from \"react-redux\";\n\nexport default ({contentid}) => {\n    const [rate, setRate] = useState(0)\n    const [textsection, setSection] = useState(\"\")\n    const [textlength, setLength] = useState(0)\n    const nowtime = moment().format('YYYY.MM.DD.')\n    const inputURL = process.env.REACT_APP_API_URL+'/review/save/'\n    const authorization = useSelector(state => state.accountReducer.authorization)\n    const currentName = useSelector(state => state.accountReducer.currentName)\n    const currentNum = useSelector(state => state.accountReducer.currentNum)\n    const textArray = ['진짜 별로에요...', '별로에요...', '그냥 그래요.', '좋아요!', '너무 좋아요!!']\n    const ratingChanged = (newRating) => {\n        setRate(newRating);\n    };\n    useEffect(() => { setLength(textsection.length) }, [textsection])\n\n    const reviewSubmit = (e) => {\n        e.preventDefault()\n        if(authorization === 'public' ){\n            const confirm = window.confirm('로그인을 해주세요.')\n            if(confirm === true){\n                console.log(confirm)\n                return window.location.href='/login'\n            }\n        }else{\n            if(textsection===\"\" || rate===0){\n                alert('별점과 리뷰를 모두 작성해 주세요.')\n            }else{\n                Axios.post(inputURL, {\n                    contentid: contentid,\n                    revContent: textsection,\n                    revDate: nowtime,\n                    revName: `${currentName}`,\n                    revStar: `${rate}`,\n                    num: currentNum\n                }).then((respone) => { \n                    alert('성공적으로 등록 하셨습니다.')\n                    window.location.reload('/review/save')})\n                    .catch((err) => { console.log(err) })}\n            }\n        }\n\n    return <>\n        <div className={Styles.kContent}>\n            <div className={Styles.comment}>\n                <div className={Styles.evaluation_place}>\n                    <form className={Styles.commentUpdateForm}>\n                        <fieldset className={Styles.fieldsetForm}>\n                            <div className={Styles.grade_star}>\n                                <span className={Styles.ico_star_inner_star} Style={{ width: \"0%\" ,height: \"1%\" }}></span>\n                                <div className={Styles.starform}>\n                                    <ReactStars\n                                        classNames={Styles.rateStar}\n                                        count={5} onChange={ratingChanged} size={40}\n                                        emptyIcon activeColor=\"#1E90FF\" />\n                                </div>\n                                <em className={Styles.num_rate}>\n                                    <span className={Styles.txt_g}> {rate}/5 점 </span>\n                                </em>\n                                <span className={Styles.txt_word}> {rate === 0 ? '평가해주세요' : textArray[rate - 1]} </span>\n                            </div>\n                            <div className={Styles.write_review}>\n                                <textarea placeholder=\"작성한 평가는 해당 장소에 공개되며, 다른 사용자가 볼 수 있습니다.&#13;&#10;또한, 수정하실 수 없습니다.&#13;&#10;글자수는 150자를 넘을 수 없습니다.\"\n                                    id=\"text1\"\n                                    className={Styles.contents}\n                                    maxlength=\"150\"\n                                    onChange={(e) => { setSection(e.target.value) }}>\n                                </textarea>\n                            </div>\n                        </fieldset>\n                    </form>\n                    <div className={Styles.agree_review}>\n                        <span className={Styles.num_letter_txt_len_warp}>\n                            <span className={Styles.screen_out}>등록한 글자수:</span>\n                            <span className={Styles.txt_len}>{textlength}</span>\n                            <span className={Styles.num_total}>/ 150</span>\n                        </span>\n                        <button className={Styles.btn_enroll} onClick={reviewSubmit} >등록</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </>\n}"]},"metadata":{},"sourceType":"module"}