{"ast":null,"code":"import _slicedToArray from \"/Users/suho/TeamProject/Spring/projectFinal/tripass/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/suho/TeamProject/Spring/projectFinal/tripass/react/src/webapp/rev/pages/ReviewInput.jsx\";\n\nimport React, { useEffect, useState } from 'react';\nimport ReactStars from \"react-rating-stars-component\";\nimport Styles from '../styles/ReviewInput.module.scss';\nimport Axios from 'axios';\nimport moment from 'moment';\nimport { useSelector } from \"react-redux\";\nexport default (function (_ref) {\n  var contentid = _ref.contentid;\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      rate = _useState2[0],\n      setRate = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      textsection = _useState4[0],\n      setSection = _useState4[1];\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      textlength = _useState6[0],\n      setLength = _useState6[1];\n\n  var nowtime = moment().format('YYYY.MM.DD.');\n  var inputURL = process.env.REACT_APP_API_URL + '/review/save/';\n  var authorization = useSelector(function (state) {\n    return state.accountReducer.authorization;\n  });\n  var currentName = useSelector(function (state) {\n    return state.accountReducer.currentName;\n  });\n  var currentNum = useSelector(function (state) {\n    return state.accountReducer.currentNum;\n  });\n  var textArray = ['진짜 별로에요...', '별로에요...', '그냥 그래요.', '좋아요!', '너무 좋아요!!'];\n\n  var ratingChanged = function ratingChanged(newRating) {\n    setRate(newRating);\n  };\n\n  useEffect(function () {\n    setLength(textsection.length);\n  }, [textsection]);\n\n  var reviewSubmit = function reviewSubmit(e) {\n    e.preventDefault();\n\n    if (authorization === 'public') {\n      var confirm = window.confirm('로그인을 해주세요.');\n\n      if (confirm === true) {\n        console.log(confirm);\n        return window.location.href = '/login';\n      }\n    } else {\n      if (textsection === \"\" || rate === 0) {\n        alert('별점과 리뷰를 모두 작성해 주세요.');\n      } else {\n        Axios.post(inputURL, {\n          contentid: contentid,\n          revContent: textsection,\n          revDate: nowtime,\n          revName: \"\".concat(currentName),\n          revStar: \"\".concat(rate),\n          num: currentNum\n        }).then(function (respone) {\n          alert('성공적으로 등록 하셨습니다.');\n          window.location.reload('/review/save');\n        }).catch(function (err) {\n          console.log(err);\n        });\n      }\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: Styles.kContent,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: Styles.comment,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: Styles.evaluation_place,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: Styles.commentUpdateForm,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"fieldset\", {\n    className: Styles.fieldsetForm,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: Styles.grade_star,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: Styles.ico_star_inner_star,\n    Style: {\n      width: \"0%\",\n      height: \"1%\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: Styles.starform,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(ReactStars, {\n    classNames: Styles.rateStar,\n    count: 5,\n    onChange: ratingChanged,\n    size: 40,\n    emptyIcon: true,\n    activeColor: \"#1E90FF\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 37\n    }\n  })), /*#__PURE__*/React.createElement(\"em\", {\n    className: Styles.num_rate,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: Styles.txt_g,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 37\n    }\n  }, \" \", rate, \"/5 \\uC810 \")), /*#__PURE__*/React.createElement(\"span\", {\n    className: Styles.txt_word,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 33\n    }\n  }, \" \", rate === 0 ? '평가해주세요' : textArray[rate - 1], \" \")), /*#__PURE__*/React.createElement(\"div\", {\n    className: Styles.write_review,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"textarea\", {\n    placeholder: \"\\uC791\\uC131\\uD55C \\uD3C9\\uAC00\\uB294 \\uD574\\uB2F9 \\uC7A5\\uC18C\\uC5D0 \\uACF5\\uAC1C\\uB418\\uBA70, \\uB2E4\\uB978 \\uC0AC\\uC6A9\\uC790\\uAC00 \\uBCFC \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4.\\r\\n\\uB610\\uD55C, \\uC218\\uC815\\uD558\\uC2E4 \\uC218 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\\r\\n\\uAE00\\uC790\\uC218\\uB294 150\\uC790\\uB97C \\uB118\\uC744 \\uC218 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\",\n    id: \"text1\",\n    className: Styles.contents,\n    maxlength: \"150\",\n    onChange: function onChange(e) {\n      setSection(e.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 33\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: Styles.agree_review,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: Styles.num_letter_txt_len_warp,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: Styles.screen_out,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 29\n    }\n  }, \"\\uB4F1\\uB85D\\uD55C \\uAE00\\uC790\\uC218:\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: Styles.txt_len,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 29\n    }\n  }, textlength), /*#__PURE__*/React.createElement(\"span\", {\n    className: Styles.num_total,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 29\n    }\n  }, \"/ 150\")), /*#__PURE__*/React.createElement(\"button\", {\n    className: Styles.btn_enroll,\n    onClick: reviewSubmit,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 25\n    }\n  }, \"\\uB4F1\\uB85D\"))))));\n});","map":{"version":3,"sources":["/Users/suho/TeamProject/Spring/projectFinal/tripass/react/src/webapp/rev/pages/ReviewInput.jsx"],"names":["React","useEffect","useState","ReactStars","Styles","Axios","moment","useSelector","contentid","rate","setRate","textsection","setSection","textlength","setLength","nowtime","format","inputURL","process","env","REACT_APP_API_URL","authorization","state","accountReducer","currentName","currentNum","textArray","ratingChanged","newRating","length","reviewSubmit","e","preventDefault","confirm","window","console","log","location","href","alert","post","revContent","revDate","revName","revStar","num","then","respone","reload","catch","err","kContent","comment","evaluation_place","commentUpdateForm","fieldsetForm","grade_star","ico_star_inner_star","width","height","starform","rateStar","num_rate","txt_g","txt_word","write_review","contents","target","value","agree_review","num_letter_txt_len_warp","screen_out","txt_len","num_total","btn_enroll"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\n\nimport ReactStars from \"react-rating-stars-component\";\nimport Styles from '../styles/ReviewInput.module.scss'\nimport Axios from 'axios'\nimport moment from 'moment';\nimport { useSelector } from \"react-redux\";\n\nexport default ({contentid}) => {\n    const [rate, setRate] = useState(0)\n    const [textsection, setSection] = useState(\"\")\n    const [textlength, setLength] = useState(0)\n    const nowtime = moment().format('YYYY.MM.DD.')\n    const inputURL = process.env.REACT_APP_API_URL+'/review/save/'\n    const authorization = useSelector(state => state.accountReducer.authorization)\n    const currentName = useSelector(state => state.accountReducer.currentName)\n    const currentNum = useSelector(state => state.accountReducer.currentNum)\n    const textArray = ['진짜 별로에요...', '별로에요...', '그냥 그래요.', '좋아요!', '너무 좋아요!!']\n    const ratingChanged = (newRating) => {\n        setRate(newRating);\n    };\n    useEffect(() => { setLength(textsection.length) }, [textsection])\n\n    const reviewSubmit = (e) => {\n        e.preventDefault()\n        if(authorization === 'public' ){\n            const confirm = window.confirm('로그인을 해주세요.')\n            if(confirm === true){\n                console.log(confirm)\n                return window.location.href='/login'\n            }\n        }else{\n            if(textsection===\"\" || rate===0){\n                alert('별점과 리뷰를 모두 작성해 주세요.')\n            }else{\n                Axios.post(inputURL, {\n                    contentid: contentid,\n                    revContent: textsection,\n                    revDate: nowtime,\n                    revName: `${currentName}`,\n                    revStar: `${rate}`,\n                    num: currentNum\n                }).then((respone) => { \n                    alert('성공적으로 등록 하셨습니다.')\n                    window.location.reload('/review/save')})\n                    .catch((err) => { console.log(err) })}\n            }\n        }\n\n    return <>\n        <div className={Styles.kContent}>\n            <div className={Styles.comment}>\n                <div className={Styles.evaluation_place}>\n                    <form className={Styles.commentUpdateForm}>\n                        <fieldset className={Styles.fieldsetForm}>\n                            <div className={Styles.grade_star}>\n                                <span className={Styles.ico_star_inner_star} Style={{ width: \"0%\" ,height: \"1%\" }}></span>\n                                <div className={Styles.starform}>\n                                    <ReactStars\n                                        classNames={Styles.rateStar}\n                                        count={5} onChange={ratingChanged} size={40}\n                                        emptyIcon activeColor=\"#1E90FF\" />\n                                </div>\n                                <em className={Styles.num_rate}>\n                                    <span className={Styles.txt_g}> {rate}/5 점 </span>\n                                </em>\n                                <span className={Styles.txt_word}> {rate === 0 ? '평가해주세요' : textArray[rate - 1]} </span>\n                            </div>\n                            <div className={Styles.write_review}>\n                                <textarea placeholder=\"작성한 평가는 해당 장소에 공개되며, 다른 사용자가 볼 수 있습니다.&#13;&#10;또한, 수정하실 수 없습니다.&#13;&#10;글자수는 150자를 넘을 수 없습니다.\"\n                                    id=\"text1\"\n                                    className={Styles.contents}\n                                    maxlength=\"150\"\n                                    onChange={(e) => { setSection(e.target.value) }}>\n                                </textarea>\n                            </div>\n                        </fieldset>\n                    </form>\n                    <div className={Styles.agree_review}>\n                        <span className={Styles.num_letter_txt_len_warp}>\n                            <span className={Styles.screen_out}>등록한 글자수:</span>\n                            <span className={Styles.txt_len}>{textlength}</span>\n                            <span className={Styles.num_total}>/ 150</span>\n                        </span>\n                        <button className={Styles.btn_enroll} onClick={reviewSubmit} >등록</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </>\n}"]},"metadata":{},"sourceType":"module"}